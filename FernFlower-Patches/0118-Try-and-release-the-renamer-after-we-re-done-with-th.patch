From f3c197fc7633ffc69ce33e711f542fc1b25d9b3d Mon Sep 17 00:00:00 2001
From: cpw <cpw@weeksfamily.ca>
Date: Mon, 23 Nov 2015 11:56:24 -0500
Subject: [PATCH 118/122] Try and release the renamer after we're done with the
 class. Should reduce memory footprint somewhat.

---
 src/org/jetbrains/java/decompiler/struct/StructClass.java  | 3 +++
 src/org/jetbrains/java/decompiler/struct/StructMethod.java | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/org/jetbrains/java/decompiler/struct/StructClass.java b/src/org/jetbrains/java/decompiler/struct/StructClass.java
index ab0f118..7848606 100644
--- a/src/org/jetbrains/java/decompiler/struct/StructClass.java
+++ b/src/org/jetbrains/java/decompiler/struct/StructClass.java
@@ -147,6 +147,9 @@ public class StructClass extends StructMember {
     if (loader != null) {
       pool = null;
     }
+    for (StructMethod m : methods) {
+        m.renamer = null;
+    }
   }
 
   public ConstantPool getPool() {
diff --git a/src/org/jetbrains/java/decompiler/struct/StructMethod.java b/src/org/jetbrains/java/decompiler/struct/StructMethod.java
index 7e7f758..68f5427 100644
--- a/src/org/jetbrains/java/decompiler/struct/StructMethod.java
+++ b/src/org/jetbrains/java/decompiler/struct/StructMethod.java
@@ -61,7 +61,7 @@ public class StructMethod extends StructMember {
   private InstructionSequence seq;
   private boolean expanded = false;
   private VBStyleCollection<StructGeneralAttribute, String> codeAttributes;
-  public final IVariableNameProvider renamer;
+  public IVariableNameProvider renamer;
 
   public StructMethod(DataInputFullStream in, StructClass clStruct) throws IOException {
     classStruct = clStruct;
-- 
2.21.0.windows.1

